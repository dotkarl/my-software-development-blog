<ul>
    {{ $currentPage := . }}
    <li id="search-menu-item" style="position:relative;">
        <svg id="search-icon" style="cursor:pointer; width:20px; height:20px; vertical-align:middle; fill:currentColor;" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M10.5 3a7.5 7.5 0 015.92 12.18l4.2 4.2a1 1 0 01-1.42 1.42l-4.2-4.2A7.5 7.5 0 1110.5 3zm0 2a5.5 5.5 0 100 11 5.5 5.5 0 000-11z"/>
        </svg>
        <input class="search-overlay-input" type="text" id="search-input" placeholder="Zoeken..." />
    </li>
    {{ range .Site.Menus.main }}
        <li>
            <a href="{{ .URL }}">
                {{ .Pre }}
                <span>{{ .Name }}</span>
                {{ .Post }}
            </a>
        </li>
    {{ end }}

</ul>
<script>
document.addEventListener('DOMContentLoaded', function() {
  const icon = document.getElementById('search-icon');
  const input = document.getElementById('search-input');
  icon.addEventListener('click', function(event) {
    input.classList.toggle('active');
    if (input.classList.contains('active')) input.focus();
    event.stopPropagation(); // Prevent document click from firing
  });
  input.addEventListener('click', function(event) {
    event.stopPropagation(); // Prevent document click from firing
  });
  input.addEventListener('keydown', function(e) {
    if (e.key === 'Enter') {
      window.open(
        'https://www.google.com/search?q=site:www.karlvanheijster.com+' + encodeURIComponent(input.value),
        '_blank');
    }
  });
  document.addEventListener('click', function() {
    if (input.classList.contains('active')) {
      input.classList.remove('active');
    }
  });
});
</script>